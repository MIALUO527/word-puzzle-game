<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Puzzle Bloom</title>
  <link href="https://fonts.googleapis.com/css?family=Quicksand:700|Pacifico&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-grad: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
      --accent: #b39ddb;
      --accent2: #e0c3fc;
      --correct: #e1bee7;
      --wrong: #ffcdd2;
      --hint: #fff9c4;
      --flower: #f7c5e0;
      --shadow: 0 4px 16px rgba(179,157,219,0.10);
    }
    body {
      font-family: 'Quicksand', 'Segoe UI', Arial, sans-serif;
      background: var(--main-grad);
      color: #333;
      max-width: 400px;
      margin: 0 auto;
      padding: 0;
      min-height: 100vh;
      box-sizing: border-box;
      position: relative;
    }
    #homePage {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px 16px;
      box-sizing: border-box;
    }
    .brand-title {
      font-family: 'Pacifico', cursive;
      font-size: 38px;
      background: linear-gradient(90deg, #b39ddb 30%, #e0c3fc 70%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      margin-bottom: 6px;
      letter-spacing: 2px;
      text-shadow: 0 2px 12px #fff7;
    }
    .brand-subtitle {
      font-family: 'Quicksand', 'Segoe UI', Arial, sans-serif;
      font-size: 18px;
      color: #b39ddb;
      margin-bottom: 32px;
      letter-spacing: 1px;
      text-shadow: 0 1px 6px #fff7;
    }
    .category-list {
      display: flex;
      flex-direction: column;
      gap: 18px;
      width: 100%;
      max-width: 360px;
      margin: 0 auto;
    }
    .category {
      background: #fff;
      padding: 20px 18px;
      border-radius: 22px;
      box-shadow: 0 4px 16px #e0c3fc44;
      cursor: pointer;
      width: 100%;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 20px;
      border: 2px solid #e0c3fc;
      transition: box-shadow 0.2s, transform 0.15s;
      position: relative;
    }
    .category:hover {
      box-shadow: 0 8px 24px #b39ddb55;
      transform: translateY(-2px) scale(1.03);
      background: #f7f0ff;
    }
    #progressBar {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-bottom: 10px;
      margin-top: 8px;
    }
    .grid {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 18px;
      flex-wrap: nowrap;
    }
    .cell {
      width: 56px;
      height: 56px;
      background: #fff9c4;
      border: 2px solid #b39ddb;
      border-radius: 50% 50% 45% 55%/60% 40% 60% 40%;
      font-size: 28px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 4px 2px;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(179,157,219,0.08);
      position: relative;
      z-index: 1;
    }
    .cell.bloom {
      background: var(--flower);
      box-shadow: 0 0 24px var(--flower);
      animation: bloom 0.7s;
    }
    @keyframes bloom {
      0% { box-shadow: 0 0 0 var(--flower); }
      70% { box-shadow: 0 0 24px var(--flower); }
      100% { box-shadow: 0 0 0 var(--flower); }
    }
    .cell.shake {
      animation: shake 0.3s;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-5px); }
      40% { transform: translateX(5px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    .letter-tray {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 2px 12px #e0c3fc33;
      padding: 12px 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-bottom: 18px;
      min-height: 70px;
      min-width: 180px;
      max-width: 340px;
      margin-left: auto;
      margin-right: auto;
      flex-wrap: wrap;
    }
    .letter {
      width: 54px;
      height: 54px;
      background: #b39ddb;
      color: #fff;
      border: 2px solid #fff9c4;
      border-radius: 50%;
      font-size: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 4px 2px;
      cursor: pointer;
      user-select: none;
      transition: background 0.2s, transform 0.1s;
      box-shadow: 0 2px 8px #e0c3fc44;
    }
    .letter:active {
      transform: scale(0.95);
      background: #a084ca;
    }
    .controls {
      display: none;
      justify-content: center;
      gap: 10px;
      padding: 12px 0;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #f7f0ff;
      z-index: 999;
      box-shadow: 0 -2px 10px #e0c3fc33;
    }
    button, .hint-btn {
      background: linear-gradient(90deg, #e0c3fc, #b39ddb);
      color: #333;
      border: none;
      padding: 14px 24px;
      font-size: 18px;
      border-radius: 24px;
      cursor: pointer;
      margin: 0 4px;
      box-shadow: 0 2px 8px #e0c3fc44;
      transition: background 0.2s, transform 0.1s;
      font-family: inherit;
      font-weight: bold;
      outline: none;
    }
    button:active, .hint-btn:active {
      transform: scale(0.96);
      background: linear-gradient(90deg, #b39ddb, #e0c3fc);
    }
    .hint-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 16px;
      padding: 10px 18px;
      margin-top: 8px;
      margin-bottom: 8px;
      background: linear-gradient(90deg, #fff9c4, #e0c3fc);
      color: #a084ca;
      border: 2px solid #b39ddb;
    }
    .hint-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .hidden {
      display: none !important;
    }
    #toast {
      position: fixed;
      left: 50%;
      bottom: 80px;
      transform: translateX(-50%);
      background: #fff;
      color: #a084ca;
      padding: 12px 28px;
      border-radius: 24px;
      box-shadow: 0 2px 12px #e0c3fc55;
      font-size: 18px;
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      transition: opacity 0.3s;
    }
    #toast.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="homePage" class="page">
    <div class="brand-title">Puzzle Bloom</div>
    <div class="brand-subtitle">Let your brain blossom with words.</div>
    <div class="category-list">
      <div class="category" onclick="startGame('food')">
        <img src="https://img.icons8.com/color/48/000000/meal.png" alt="Food" /> Food & Drinks
      </div>
      <div class="category" onclick="startGame('fashion')">
        <img src="https://img.icons8.com/color/48/dress-front-view.png" alt="Fashion" /> Fashion
      </div>
      <div class="category" onclick="startGame('music')">
        <img src="https://img.icons8.com/color/48/000000/musical-notes.png" alt="Music" /> Music
      </div>
      <div class="category" onclick="startGame('space')">
        <img src="https://img.icons8.com/color/48/000000/rocket.png" alt="Space" /> Space
      </div>
      <div class="category" onclick="startGame('sports')">
        <img src="https://img.icons8.com/color/48/000000/trophy.png" alt="Sports" /> Sports
      </div>
      <div class="category" onclick="startGame('animals')">
        <img src="https://img.icons8.com/emoji/48/paw-prints.png" alt="Animals" /> Animals
      </div>
      <div class="category" onclick="startGame('nature')">
        <img src="https://img.icons8.com/color/48/000000/forest.png" alt="Nature" /> Nature
      </div>
      <div class="category" onclick="startGame('jobs')">
        <img src="https://img.icons8.com/color/48/000000/briefcase.png" alt="Jobs" /> Jobs
      </div>
      <div class="category" onclick="startGame('mind')">
        <img src="https://img.icons8.com/color/48/000000/brain.png" alt="Mind" /> Mind
      </div>
      <div class="category" onclick="startGame('travel')">
        <img src="https://img.icons8.com/color/48/000000/worldwide-location.png" alt="Travel" /> Travel
      </div>
    </div>
  </div>
  <div id="gamePage" class="hidden" style="min-height: 100vh; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; gap: 10px; padding-top: 18px;">
    <div id="progressBar"></div>
    <div id="status" style="font-size:16px; color:#a084ca;">üî• Streak: 0</div>
    <div id="clue" style="font-size:18px; margin-bottom:8px;">Clue: Example</div>
    <div class="grid" id="grid"></div>
    <div class="letter-tray" id="letters"></div>
    <button class="hint-btn" id="hintBtn" onclick="useHint()">
      üå∏ Hint <span id="hintCount"></span>
    </button>
    <div style="margin-top: 8px;">
      <button onclick="goHome()">üè† Home</button>
    </div>
  </div>
  <div class="controls hidden" id="controlsBar">
    <button onclick="loadWord()">üîÑ Retry</button>
    <button onclick="nextLevel()">‚û°Ô∏è Next</button>
    <button onclick="goHome()">üè† Home</button>
  </div>
  <div id="toast"></div>
  <script>
    // Word data, at least one per category
    const allWordData = {
      food: [
        { answer: "APPLE", clue: "A fruit and a tech company" },
        { answer: "BREAD", clue: "Staple food made from flour" }
      ],
      fashion: [
        { answer: "DRESS", clue: "A one-piece garment" }
      ],
      music: [
        { answer: "PIANO", clue: "A large keyboard instrument" }
      ],
      space: [
        { answer: "MOON", clue: "Earth's natural satellite" }
      ],
      sports: [
        { answer: "SOCCER", clue: "Football in most countries" }
      ],
      animals: [
        { answer: "ZEBRA", clue: "Striped animal" }
      ],
      nature: [
        { answer: "OCEAN", clue: "Vast body of saltwater" }
      ],
      jobs: [
        { answer: "DOCTOR", clue: "A person who heals" }
      ],
      mind: [
        { answer: "THINK", clue: "To use your brain" }
      ],
      travel: [
        { answer: "PLANE", clue: "A flying vehicle" }
      ]
    };

    let words = [], current = 0, streak = 0, userAnswer = [];
    let hintCount = 2; // 2 hints per game

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 1200);
    }

    function renderProgressBar(total, current) {
      const bar = document.getElementById('progressBar');
      bar.innerHTML = '';
      for(let i=0;i<total;i++) {
        const flower = document.createElement('span');
        flower.textContent = i < current ? 'üå∏' : 'üåº';
        flower.style.fontSize = '22px';
        bar.appendChild(flower);
      }
    }

    function startGame(category) {
      const title = document.getElementById("title");
      if (title) title.style.display = "none";
      const subtitle = document.getElementById("subtitle");
      if (subtitle) subtitle.style.display = "none";
      const home = document.getElementById("homePage");
      if (home) home.classList.add("hidden");
      const game = document.getElementById("gamePage");
      if (game) game.classList.remove("hidden");
      const controls = document.getElementById("controlsBar");
      if (controls) {
        controls.classList.add("hidden");
        controls.style.display = "none";
      }
      words = allWordData[category] || [];
      current = 0;
      streak = 0;
      hintCount = 2;
      loadWord();
    }

    function goHome() {
      const title = document.getElementById("title");
      if (title) title.style.display = "block";
      const subtitle = document.getElementById("subtitle");
      if (subtitle) subtitle.style.display = "block";
      const home = document.getElementById("homePage");
      if (home) home.classList.remove("hidden");
      const game = document.getElementById("gamePage");
      if (game) game.classList.add("hidden");
      const controls = document.getElementById("controlsBar");
      if (controls) {
        controls.classList.add("hidden");
        controls.style.display = "none";
      }
    }

    function loadWord() {
      if (!words[current]) return;
      const currentWord = words[current];
      const answer = currentWord.answer;
      const clue = currentWord.clue;
      const grid = document.getElementById("grid");
      const clueBox = document.getElementById("clue");
      const letters = document.getElementById("letters");
      if (!grid || !clueBox || !letters) return;
      clueBox.textContent = `Clue: ${clue}`;
      grid.innerHTML = '';
      letters.innerHTML = '';
      userAnswer = [];
      // Render cells horizontally
      answer.split('').forEach((_, i) => {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.setAttribute("data-index", i);
        cell.addEventListener("click", () => {
          const index = userAnswer.findIndex(entry => entry.cell === cell);
          if (index !== -1) {
            const removed = userAnswer.splice(index, 1)[0];
            cell.textContent = '';
            cell.classList.remove('bloom');
            const restoredTile = createTile(removed.char);
            letters.appendChild(restoredTile);
          }
        });
        grid.appendChild(cell);
      });
      // Render shuffled letters in tray
      const shuffled = shuffle(answer.split(''));
      shuffled.forEach(c => letters.appendChild(createTile(c)));
      // Status bar
      const status = document.getElementById("status");
      if (status) status.textContent = `üî• Streak: ${streak}`;
      // Progress bar
      renderProgressBar(words.length, current);
      // Hint button
      updateHintBtn();
    }

    function createTile(c) {
      const tile = document.createElement("div");
      tile.className = "letter";
      tile.textContent = c;
      tile.addEventListener("click", () => {
        const emptyCell = [...document.querySelectorAll(".cell")].find(cell => cell.textContent === '');
        if (!emptyCell) return;
        emptyCell.textContent = c;
        userAnswer.push({ char: c, cell: emptyCell });
        tile.remove();
        checkAnswer();
      });
      return tile;
    }

    function checkAnswer() {
      if (!words[current]) return;
      const answer = words[current].answer;
      const cells = [...document.querySelectorAll(".cell")];
      const result = cells.map(c => c.textContent).join('');
      if (result.length !== answer.length) return;
      let correct = true;
      cells.forEach((cell, i) => {
        const match = cell.textContent === answer[i];
        if (!match) {
          cell.classList.add('shake');
          setTimeout(() => cell.classList.remove('shake'), 300);
        }
        cell.style.backgroundColor = match ? 'var(--correct)' : 'var(--wrong)';
        if (!match) correct = false;
      });
      if (correct) {
        streak++;
        cells.forEach(cell => {
          cell.classList.add('bloom');
          setTimeout(() => {
            cell.classList.remove('bloom');
            cell.style.backgroundColor = '#fff9c4';
          }, 700);
        });
        showToast("üå∏ Bloom! Well done!");
        setTimeout(() => nextLevel(), 1100);
      }
    }

    function nextLevel() {
      current++;
      if (current >= words.length) {
        showToast("üéâ You've finished all words!");
        setTimeout(goHome, 1200);
        return;
      }
      loadWord();
    }

    function updateHintBtn() {
      const btn = document.getElementById('hintBtn');
      const count = document.getElementById('hintCount');
      if (btn && count) {
        count.textContent = `(${hintCount})`;
        btn.disabled = hintCount <= 0;
      }
    }

    function useHint() {
      if (hintCount <= 0) return;
      const answer = words[current].answer;
      const cells = [...document.querySelectorAll(".cell")];
      // Find the first incorrect or empty cell
      let hintIndex = -1;
      for (let i = 0; i < answer.length; i++) {
        if (cells[i].textContent !== answer[i]) {
          hintIndex = i;
          break;
        }
      }
      if (hintIndex === -1) return;
      // Find the letter in tray
      const letters = [...document.querySelectorAll(".letter")];
      const targetLetter = letters.find(l => l.textContent === answer[hintIndex]);
      if (!targetLetter) return;
      // Auto fill
      cells[hintIndex].textContent = answer[hintIndex];
      cells[hintIndex].classList.add('bloom');
      setTimeout(() => cells[hintIndex].classList.remove('bloom'), 700);
      userAnswer.push({ char: answer[hintIndex], cell: cells[hintIndex] });
      targetLetter.remove();
      hintCount--;
      updateHintBtn();
      showToast("üå∏ A flower helped you!");
      checkAnswer();
    }
  </script>
</body>
</html>
