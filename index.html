<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Puzzle Bloom</title>
  <style>
    :root {
      --accent: #4caf50;
      --wrong: #ffcdd2;
      --correct: #c8e6c9;
      --hint: #fff9c4;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f9f9f9, #e0f2f1);
      margin: 0;
      padding: 0;
      text-align: center;
      color: #333;
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      font-size: 30px;
      margin-bottom: 24px;
    }
    p {
      margin-top: -12px;
      margin-bottom: 32px;
      font-size: 14px;
      color: #666;
      font-style: italic;
    }
    .hidden { display: none; }
    .category {
      background: white;
      padding: 16px;
      border-radius: 16px;
      box-shadow: var(--shadow);
      cursor: pointer;
      width: 100%;
      margin: 8px 0;
      transition: transform 0.2s, background 0.3s;
    }
    .category:hover {
      transform: translateY(-5px);
      background: #e8f5e9;
    }
    .status,
    .clue {
      font-size: 18px;
    }
    .grid {
      display: flex;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
    }
    .cell {
      width: 60px;
      height: 60px;
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 8px;
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .letters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      padding: 0 8px;
      max-width: 100%;
      box-sizing: border-box;
      min-height: 100px;
    }
    .letter {
      width: 50px;
      height: 50px;
      background-color: var(--hint);
      border: 2px solid #fbc02d;
      border-radius: 10px;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .controls {
      display: none;
      justify-content: center;
      gap: 10px;
      padding: 12px 0;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #f9f9f9;
      z-index: 999;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    }
    button {
      background-color: var(--accent);
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1 id="title">Puzzle Bloom</h1>
  <p id="subtitle">Let your brain blossom with words.</p>
  <div id="homePage" class="page" style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
    <div class="category" onclick="startGame('food')">
      <img src="https://img.icons8.com/color/48/000000/meal.png" style="vertical-align: middle; margin-right: 8px;" />
      Food & Drinks
    </div>
    <div class="category" onclick="startGame('animals')">
      <img src="https://img.icons8.com/emoji/48/paw-prints.png" style="vertical-align: middle; margin-right: 8px;" />
      Animals
    </div>
    <div class="category" onclick="startGame('nature')">
      <img src="https://img.icons8.com/color/48/000000/forest.png" style="vertical-align: middle; margin-right: 8px;" />
      Nature
    </div>
  </div>
  <div id="gamePage" class="hidden" style="display: flex; justify-content: center; align-items: center; padding: 20px 0 140px; height: calc(100vh - 140px); box-sizing: border-box;">
    <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
      <div class="status hidden" id="status">üî• Streak: 0</div>
      <div class="clue hidden" id="clue">Clue: Example</div>
      <div class="grid" id="grid"></div>
      <div class="letters" id="letters"></div>
    </div>
  </div>
  <div class="controls hidden" id="controlsBar">
    <button onclick="loadWord()">üîÑ Retry</button>
    <button onclick="nextLevel()">‚û°Ô∏è Next</button>
    <button onclick="goHome()">üè† Home</button>
  </div>
  <script>
    let words = [], current = 0, streak = 0, userAnswer = [];
    const allWordData = {
      food: [ { answer: "APPLE", clue: "A fruit and a tech company" } ],
      animals: [ { answer: "ZEBRA", clue: "Striped animal" } ],
      nature: [ { answer: "OCEAN", clue: "Vast body of saltwater" } ]
    };
    function startGame(category) {
      if (document.getElementById("title")) document.getElementById("title").style.display = "none";
      if (document.getElementById("subtitle")) document.getElementById("subtitle").style.display = "none";
      if (document.getElementById("homePage")) document.getElementById("homePage").classList.add("hidden");
      if (document.getElementById("gamePage")) document.getElementById("gamePage").classList.remove("hidden");
      if (document.getElementById("status")) document.getElementById("status").classList.remove("hidden");
      if (document.getElementById("clue")) document.getElementById("clue").classList.remove("hidden");
      if (document.getElementById("controlsBar")) {
        document.getElementById("controlsBar").classList.remove("hidden");
        document.getElementById("controlsBar").style.display = "flex";
      }
      words = allWordData[category] || [];
      current = 0;
      streak = 0;
      loadWord();
    }
    function goHome() {
      if (document.getElementById("title")) document.getElementById("title").style.display = "block";
      if (document.getElementById("subtitle")) document.getElementById("subtitle").style.display = "block";
      if (document.getElementById("homePage")) document.getElementById("homePage").classList.remove("hidden");
      if (document.getElementById("gamePage")) document.getElementById("gamePage").classList.add("hidden");
      if (document.getElementById("status")) document.getElementById("status").classList.add("hidden");
      if (document.getElementById("clue")) document.getElementById("clue").classList.add("hidden");
      if (document.getElementById("controlsBar")) {
        document.getElementById("controlsBar").classList.add("hidden");
        document.getElementById("controlsBar").style.display = "none";
      }
    }
    function loadWord() {
      const { answer, clue } = words[current];
      const grid = document.getElementById("grid");
      const clueBox = document.getElementById("clue");
      const letters = document.getElementById("letters");
      clueBox.textContent = `Clue: ${clue}`;
      grid.innerHTML = '';
      letters.innerHTML = '';
      userAnswer = [];
      answer.split('').forEach((_, i) => {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.setAttribute("data-index", i);
        cell.addEventListener("click", () => {
          const index = userAnswer.findIndex(entry => entry.cell === cell);
          if (index !== -1) {
            const removed = userAnswer.splice(index, 1)[0];
            cell.textContent = '';
            const restoredTile = createTile(removed.char);
            letters.appendChild(restoredTile);
          }
        });
        grid.appendChild(cell);
      });
      const shuffled = answer.split('').sort(() => Math.random() - 0.5);
      shuffled.forEach(c => letters.appendChild(createTile(c)));
      document.getElementById("status").textContent = `üî• Streak: ${streak}`;
    }
    function createTile(c) {
      const tile = document.createElement("div");
      tile.className = "letter";
      tile.textContent = c;
      tile.addEventListener("click", () => {
        const emptyCell = [...document.querySelectorAll(".cell")].find(cell => cell.textContent === '');
        if (!emptyCell) return;
        emptyCell.textContent = c;
        userAnswer.push({ char: c, cell: emptyCell });
        tile.remove();
        checkAnswer();
      });
      return tile;
    }
    function checkAnswer() {
      const { answer } = words[current];
      const cells = [...document.querySelectorAll(".cell")];
      const result = cells.map(c => c.textContent).join('');
      if (result.length !== answer.length) return;
      let correct = true;
      cells.forEach((cell, i) => {
        const match = cell.textContent === answer[i];
        cell.style.backgroundColor = match ? 'var(--correct)' : 'var(--wrong)';
        if (!match) correct = false;
      });
      if (correct) {
        streak++;
        setTimeout(() => nextLevel(), 1000);
      }
    }
    function nextLevel() {
      current++;
      if (current >= words.length) {
        alert("You've finished all words in this category!");
        goHome();
        return;
      }
      loadWord();
    }
  </script>
</body>
</html>
