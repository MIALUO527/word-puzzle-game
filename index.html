<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Puzzle Bloom</title>
  <style>
    :root {
      --accent: #4caf50;
      --wrong: #ffcdd2;
      --correct: #c8e6c9;
      --hint: #fff9c4;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f9f9f9, #e0f2f1);
      margin: 0;
      padding: 0;
      text-align: center;
      color: #333;
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
    }
    .category {
      background: white;
      padding: 12px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      cursor: pointer;
      width: 100%;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
    }
    .category:hover {
      transform: translateY(-2px);
      background: #e8f5e9;
    }
    .grid {
      display: flex;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .cell {
      width: 50px;
      height: 50px;
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 8px;
      font-size: 24px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    .letter {
      width: 48px;
      height: 48px;
      background-color: var(--hint);
      border: 2px solid #fbc02d;
      border-radius: 10px;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 4px;
      cursor: pointer;
      user-select: none;
    }
    .controls {
      display: none;
      justify-content: center;
      gap: 10px;
      padding: 12px 0;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #f9f9f9;
      z-index: 999;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    }
    button {
      background-color: var(--accent);
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    .hidden {
      display: none !important;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-5px); }
      40% { transform: translateX(5px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    .cell.shake {
      animation: shake 0.3s;
    }
    @keyframes flash {
      0% { background: var(--correct); }
      100% { background: white; }
    }
    .cell.flash {
      animation: flash 0.5s;
    }
  </style>
</head>
<body>
  <div id="homePage" class="page" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 32px 16px; text-align: center; min-height: 100vh; box-sizing: border-box;">
    <h1 id="title" style="margin-bottom: 8px; font-size: 28px;">Puzzle Bloom</h1>
    <p id="subtitle" style="margin-bottom: 32px; font-size: 14px; color: #666;">Let your brain blossom with words.</p>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; width: 100%; max-width: 360px;">
      <div class="category" onclick="startGame('food')">
        <img src="https://img.icons8.com/color/48/000000/meal.png" /> Food & Drinks
      </div>
      <div class="category" onclick="startGame('fashion')">
        <img src="https://img.icons8.com/color/48/000000/fashion.png" /> Fashion
      </div>
      <div class="category" onclick="startGame('music')">
        <img src="https://img.icons8.com/color/48/000000/musical-notes.png" /> Music
      </div>
      <div class="category" onclick="startGame('space')">
        <img src="https://img.icons8.com/color/48/000000/rocket.png" /> Space
      </div>
      <div class="category" onclick="startGame('sports')">
        <img src="https://img.icons8.com/color/48/000000/trophy.png" /> Sports
      </div>
      <div class="category" onclick="startGame('animals')">
        <img src="https://img.icons8.com/emoji/48/paw-prints.png" /> Animals
      </div>
      <div class="category" onclick="startGame('nature')">
        <img src="https://img.icons8.com/color/48/000000/forest.png" /> Nature
      </div>
      <div class="category" onclick="startGame('jobs')">
        <img src="https://img.icons8.com/color/48/000000/briefcase.png" /> Jobs
      </div>
      <div class="category" onclick="startGame('mind')">
        <img src="https://img.icons8.com/color/48/000000/brain.png" /> Mind
      </div>
      <div class="category" onclick="startGame('travel')">
        <img src="https://img.icons8.com/color/48/000000/worldwide-location.png" /> Travel
      </div>
    </div>
  </div>
  <div id="gamePage" class="hidden" style="height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 16px;">
    <div id="status">üî• Streak: 0</div>
    <div id="clue">Clue: Example</div>
    <div class="grid" id="grid"></div>
    <div class="letters" id="letters"></div>
    <div style="margin-top: 8px;">
      <button onclick="goHome()">üè† ËøîÂõûÈ¶ñÈ°µ</button>
    </div>
  </div>
  <div class="controls hidden" id="controlsBar">
    <button onclick="loadWord()">üîÑ Retry</button>
    <button onclick="nextLevel()">‚û°Ô∏è Next</button>
    <button onclick="goHome()">üè† Home</button>
  </div>
  <script>
    // È¢òÂ∫ìÊï∞ÊçÆÔºåÊØè‰∏™Á±ªÂà´Ëá≥Â∞ë‰∏ÄÈÅìÈ¢ò
    const allWordData = {
      food: [
        { answer: "APPLE", clue: "A fruit and a tech company" },
        { answer: "BREAD", clue: "Staple food made from flour" }
      ],
      fashion: [
        { answer: "DRESS", clue: "A one-piece garment" }
      ],
      music: [
        { answer: "PIANO", clue: "A large keyboard instrument" }
      ],
      space: [
        { answer: "MOON", clue: "Earth's natural satellite" }
      ],
      sports: [
        { answer: "SOCCER", clue: "Football in most countries" }
      ],
      animals: [
        { answer: "ZEBRA", clue: "Striped animal" }
      ],
      nature: [
        { answer: "OCEAN", clue: "Vast body of saltwater" }
      ],
      jobs: [
        { answer: "DOCTOR", clue: "A person who heals" }
      ],
      mind: [
        { answer: "THINK", clue: "To use your brain" }
      ],
      travel: [
        { answer: "PLANE", clue: "A flying vehicle" }
      ]
    };

    let words = [], current = 0, streak = 0, userAnswer = [];

    // Fisher-Yates Ê¥óÁâåÁÆóÊ≥ï
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startGame(category) {
      const title = document.getElementById("title");
      if (title) title.style.display = "none";
      const subtitle = document.getElementById("subtitle");
      if (subtitle) subtitle.style.display = "none";
      const home = document.getElementById("homePage");
      if (home) home.classList.add("hidden");
      const game = document.getElementById("gamePage");
      if (game) game.classList.remove("hidden");
      const controls = document.getElementById("controlsBar");
      if (controls) {
        controls.classList.remove("hidden");
        controls.style.display = "flex";
      }
      words = allWordData[category] || [];
      current = 0;
      streak = 0;
      loadWord();
    }

    function goHome() {
      const title = document.getElementById("title");
      if (title) title.style.display = "block";
      const subtitle = document.getElementById("subtitle");
      if (subtitle) subtitle.style.display = "block";
      const home = document.getElementById("homePage");
      if (home) home.classList.remove("hidden");
      const game = document.getElementById("gamePage");
      if (game) game.classList.add("hidden");
      const controls = document.getElementById("controlsBar");
      if (controls) {
        controls.classList.add("hidden");
        controls.style.display = "none";
      }
    }

    function loadWord() {
      if (!words[current]) return;
      const currentWord = words[current];
      const answer = currentWord.answer;
      const clue = currentWord.clue;
      const grid = document.getElementById("grid");
      const clueBox = document.getElementById("clue");
      const letters = document.getElementById("letters");
      if (!grid || !clueBox || !letters) return;
      clueBox.textContent = `Clue: ${clue}`;
      grid.innerHTML = '';
      letters.innerHTML = '';
      userAnswer = [];
      answer.split('').forEach((_, i) => {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.setAttribute("data-index", i);
        cell.addEventListener("click", () => {
          const index = userAnswer.findIndex(entry => entry.cell === cell);
          if (index !== -1) {
            const removed = userAnswer.splice(index, 1)[0];
            cell.textContent = '';
            const restoredTile = createTile(removed.char);
            letters.appendChild(restoredTile);
          }
        });
        grid.appendChild(cell);
      });
      const shuffled = shuffle(answer.split(''));
      shuffled.forEach(c => letters.appendChild(createTile(c)));
      const status = document.getElementById("status");
      if (status) status.textContent = `üî• Streak: ${streak}`;
    }

    function createTile(c) {
      const tile = document.createElement("div");
      tile.className = "letter";
      tile.textContent = c;
      tile.addEventListener("click", () => {
        const emptyCell = [...document.querySelectorAll(".cell")].find(cell => cell.textContent === '');
        if (!emptyCell) return;
        emptyCell.textContent = c;
        userAnswer.push({ char: c, cell: emptyCell });
        tile.remove();
        checkAnswer();
      });
      return tile;
    }

    function checkAnswer() {
      if (!words[current]) return;
      const answer = words[current].answer;
      const cells = [...document.querySelectorAll(".cell")];
      const result = cells.map(c => c.textContent).join('');
      if (result.length !== answer.length) return;
      let correct = true;
      cells.forEach((cell, i) => {
        const match = cell.textContent === answer[i];
        if (!match) {
          cell.classList.add('shake');
          setTimeout(() => cell.classList.remove('shake'), 300);
        }
        cell.style.backgroundColor = match ? 'var(--correct)' : 'var(--wrong)';
        if (!match) correct = false;
      });
      if (correct) {
        streak++;
        cells.forEach(cell => {
          cell.classList.add('flash');
          setTimeout(() => cell.classList.remove('flash'), 500);
        });
        setTimeout(() => nextLevel(), 1000);
      }
    }

    function nextLevel() {
      current++;
      if (current >= words.length) {
        alert("You've finished all words in this category!");
        goHome();
        return;
      }
      loadWord();
    }
  </script>
</body>
</html>
